<% flash.each do |name, msg| %>
  <% if name == :notice %>
    <div class="alert alert-success"><%= msg %></div>
  <% end %>
<% end %>

<%= render 'userinfo', user: @user, book: @book %>

    <div class="col-8 offset-1">
      <h2>Books</h2>
      <% if Book.exists? %>
        <table class="table table-border-top-bottom mb-5">
          <thead>
            <tr>
              <th class="p-2 text-center"></th>
              <th class="p-2 text-center">Title</th>
              <th class="p-2 text-center">Opinion</th>
            </tr>
          </thead>

          <tbody>
          <% @books.each do |book| %>
            <tr>
              <td class="p-2 text-center">
                <% if @user.profile_image.attached? %>
                  <%= link_to user_path(@user) do %>
                    <%= image_tag @user.profile_image, size: "80x80" %>
                  <% end %>
                <% else %>
                  <%= link_to user_path(@user) do %>
                    <%= image_tag 'default-image.jpg', size: "80x80" %>
                  <% end %>
                <% end %>
              </td>
              <td class="p-2 text-center">
                <%= link_to book_path(book.id) do %>
                  <%= book.title %>
                <% end %>
              </td>
              <td class="p-2 text-center"><%= book.body %></td>
            </tr>
          <% end %>
          </tbody>
        </table>

      <% else %>
        <table class="table table-border-top-bottom mb-5">
          <thead>
            <tr>
              <th class="p-2 text-center">Title</th>
              <th class="p-2 text-center">Opinion</th>
            </tr>
          </thead>
        </table>
      <% end %>
    </div>
  </div>
</div>
